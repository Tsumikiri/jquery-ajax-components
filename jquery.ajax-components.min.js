/**
 * @author Alex Furey
 * @version 1.2.1
 * @requires jQuery
 */
!function(a){function e(e){a.fn.ac.config.enableResponseHandlers&&a.each(a.fn.ac.config.responseHandlers,function(t,n){t in e&&(a.isPlainObject(e[t])||a.isArray(e[t])?a.each(e[t],n):n.call(e[t],e[t]))})}function t(t,n){return a.ajax(a.extend(!0,{},a.fn.ac.config.ajaxDefaults,t)).done(e).done(a.fn.ac.config.doneHandler).fail(a.fn.ac.config.errorHandler).always(a.fn.ac.config.alwaysHandler).done(function(a){n.resolve(this,a)}).fail(function(a,e,t){n.reject(this,a,e,t)})}function n(e,n,i){var r=function(e){return!1!==e&&null!==e&&(!(!a.fn.ac.config.alertAllowEmpty&&""===e)&&("string"==typeof e&&(l(n,"data")[a.fn.ac.config.alertInputDataKey]=e),void t(n,i)))};e=a.extend(!0,{},a.fn.ac.config.alertDefaults,e),"function"==typeof a.fn.ac.config.swal?a.fn.ac.config.swal(e,r):"type"in e&&"input"===e.type?r(prompt(e.title+(e.text?"\n"+e.text:""),"inputValue"in e?e.inputValue:"")):"showCancelButton"in e&&e.showCancelButton?r(confirm(e.title+(e.text?"\n"+e.text:""))):(alert(e.title+(e.text?"\n"+e.text:"")),r())}function l(a,e,t){return void 0===t&&(t={}),e in a||(a[e]=t),a[e]}function i(e,t,n){a.isPlainObject(n)&&t in e&&a.isPlainObject(e[t])?a.extend(!0,e[t],n):a.isArray(n)&&t in e&&a.isArray(e[t])?e.push.apply(e[t],n):e[t]=n}function r(e,t){var n={};return a.each(a(e).data(),function(e,r){var o,c,s=e.match(t);if(s)if((s=s.filter(function(a){return a})).length>1){c=n;for(var f=1;f<s.length;f++)s[f]&&(o=s[f].charAt(0).toLowerCase()+s[f].slice(1),f<s.length-1?c=l(c,o):i(c,o,r))}else a.isPlainObject(r)&&a.extend(!0,n,r)}),n}function o(e,t){"FORM"===a(t).prop("tagName")&&(e.ajax.url=a(t).attr("action")||e.ajax.url,e.ajax.method=a(t).attr("method")||e.ajax.method,a.extend(!0,l(e.ajax,"data"),a.fn.ac.config.serializeObject.call(a(t))))}function c(e,t){a.extend(!0,l(e,p),r(t,a.fn.ac.config.alertAttrRegex)),a.extend(!0,l(e,u),r(t,a.fn.ac.config.ajaxAttrRegex)),o(e,t)}function s(e){var l=a.extend(!0,{},e.data.opts),i=this;return i!==e.delegateTarget&&c(l,e.delegateTarget),c(l,i),p in l&&l[p]&&!a.isEmptyObject(l[p])?n(l[p],l[u],e.data.deferred):t(l[u],e.data.deferred),a.fn.ac.config.stopPropagation&&e.stopPropagation(),a.fn.ac.config.preventDefault&&e.preventDefault(),a.fn.ac.config.eventReturn}function f(e,t,n,l,i){var r={};r[u]=n,r[p]=l,a(this).on(e+a.fn.ac.config.eventSuffix,t,{opts:r,deferred:i},s)}var u="ajax",p="alert",d=function(){this.doneCallbacks=[],this.failCallbacks=[],this.alwaysCallbacks=[]};d.prototype.resolve=function(){for(var a=Array.prototype.splice.call(arguments,1),e=0;e<this.doneCallbacks.length;e++)this.doneCallbacks[e].apply(arguments[0],a);for(e=0;e<this.alwaysCallbacks.length;e++)this.alwaysCallbacks[e].apply(arguments[0])},d.prototype.reject=function(){for(var a=Array.prototype.splice.call(arguments,1),e=0;e<this.failCallbacks.length;e++)this.failCallbacks[e].apply(arguments[0],a);for(e=0;e<this.alwaysCallbacks.length;e++)this.alwaysCallbacks[e].apply(arguments[0])},d.prototype.done=function(a){return this.doneCallbacks.push(a),this},d.prototype.fail=function(a){return this.failCallbacks.push(a),this},d.prototype.always=function(a){return this.alwaysCallbacks.push(a),this},a.fn.ac=function(){for(var e=[],t=0;t<4;t++)1===t&&a.isPlainObject(arguments[t])&&e.push(null),e.push(arguments[t]);var n=new d;e.push(n);var l=this.each(function(){f.apply(this,e)});return a.fn.ac.config.returnDeferred?n:l},a.fn.ac.config={doneHandler:null,errorHandler:null,alwaysHandler:null,responseHandlers:{content:function(e,t){a(e).html(t)},remove:function(e,t){a(t).remove()},hide:function(e,t){a(t).hide()},show:function(e,t){a(t).show()},hideModal:function(e,t){a(t).modal("hide")},showModal:function(e,t){a(t).modal("show")},append:function(e,t){a(e).append(t)},prepend:function(e,t){a(e).prepend(t)}},enableResponseHandlers:!0,returnDeferred:!0,ajaxAttrRegex:/acAjax(Accepts|Contents|Context|Converters|Data|Headers|StatusCode|XhrFields)?([a-z]*)/i,alertAttrRegex:/acAlert([a-z]*)/i,eventSuffix:".ac",preventDefault:!0,stopPropagation:!1,eventReturn:!0,alertInputDataKey:"input",alertAllowEmpty:!0,ajaxDefaults:{dataType:"json"},alertDefaults:{title:"Are you sure?",type:"warning",showCancelButton:!0},swal:"function"==typeof swal?swal:null,serializeObject:function(){var e={};return a.each(this.serializeArray(),function(a,t){var n=e[t.name];e[t.name]=void 0!==n&&null!==n?n+","+t.value:t.value}),e}}}(jQuery);
