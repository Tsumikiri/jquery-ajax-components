!function(t){function a(a){t.ac.config.enableResponseHandlers&&t.each(t.ac.config.responseHandlers,function(e,n){e in a&&(t.isPlainObject(a[e])||t.isArray(a[e])?t.each(a[e],n):n.call(a[e],a[e]))})}function e(e,n){var i=t.ajax(t.extend(!0,{},t.ac.config.ajaxDefaults,e)).done(a).done(t.ac.config.doneHandler).fail(t.ac.config.errorHandler).always(t.ac.config.alwaysHandler);return n&&i.done(function(t){n.resolve(this,t)}).fail(function(t,a,e){n.reject(this,t,a,e)}),i}function n(a,n,r){var l=function(a){return!1!==a&&null!==a&&(!(!t.ac.config.alertAllowEmpty&&""===a)&&("string"==typeof a&&(i(n,"data")[t.ac.config.alertInputDataKey]=a),void e(n,r)))};a=t.extend(!0,{},t.ac.config.alertDefaults,a),"function"==typeof t.ac.config.swal?t.ac.config.swal(a,l):"type"in a&&"input"===a.type?l(prompt(a.title+(a.text?"\n"+a.text:""),"inputValue"in a?a.inputValue:"")):"showCancelButton"in a&&a.showCancelButton?l(confirm(a.title+(a.text?"\n"+a.text:""))):(alert(a.title+(a.text?"\n"+a.text:"")),l())}function i(t,a,e){return void 0===e&&(e={}),a in t||(t[a]=e),t[a]}function r(a,e,n){t.isPlainObject(n)&&e in a&&t.isPlainObject(a[e])?t.extend(!0,a[e],n):t.isArray(n)&&e in a&&t.isArray(a[e])?a.push.apply(a[e],n):a[e]=n}function l(a,e){var n={};return t.each(t(a).data(),function(a,l){var o,c,s=a.match(e);if(s)if((s=s.filter(function(t){return t})).length>1){c=n;for(var f=1;f<s.length;f++)s[f]&&(o=s[f].charAt(0).toLowerCase()+s[f].slice(1),f<s.length-1?c=i(c,o):r(c,o,l))}else t.isPlainObject(l)&&t.extend(!0,n,l)}),n}function o(a,e){"FORM"===t(e).prop("tagName")&&(a.ajax.url=t(e).attr("action")||a.ajax.url,a.ajax.method=t(e).attr("method")||a.ajax.method,t.extend(!0,i(a.ajax,"data"),t.ac.config.serializeObject.call(t(e))))}function c(a,e){t.extend(!0,i(a,p),l(e,t.ac.config.alertAttrRegex)),t.extend(!0,i(a,u),l(e,t.ac.config.ajaxAttrRegex)),o(a,e)}function s(a){var i=t.extend(!0,{},a.data.opts),r=this;return r!==a.delegateTarget&&c(i,a.delegateTarget),c(i,r),p in i&&i[p]&&!t.isEmptyObject(i[p])?n(i[p],i[u],a.data.deferred):e(i[u],a.data.deferred),t.ac.config.stopPropagation&&a.stopPropagation(),t.ac.config.preventDefault&&a.preventDefault(),t.ac.config.eventReturn}function f(a,e,n,i,r){console.log(arguments);var l={};return l[u]=n,l[p]=i,t(this).on(a+t.ac.config.eventSuffix,e,{opts:l,deferred:r},s).trigger(t.ac.config.initEvent+t.ac.config.eventSuffix),this}var u="ajax",p="alert";t.fn.ac=function(){for(var a=[],e=0,n=0;e<4;n++)1===n&&t.isPlainObject(arguments[n])&&(a.push(null),e++),a.push(arguments[n]),e++;var i=new d;a.push(i);var r=this.each(function(){f.apply(this,a)});return t.ac.config.returnDeferred?i:r},t.ac=function(t){return e(t)},t.ac.config={doneHandler:null,errorHandler:null,alwaysHandler:null,responseHandlers:{html:function(a,e){t(a).html(e)},remove:function(a,e){t(e).remove()},hide:function(a,e){t(e).hide()},show:function(a,e){t(e).show()},hideModal:function(a,e){t(e).modal("hide")},showModal:function(a,e){t(e).modal("show")},append:function(a,e){t(a).append(e)},prepend:function(a,e){t(a).prepend(e)}},enableResponseHandlers:!0,returnDeferred:!0,ajaxAttrRegex:/acAjax(Accepts|Contents|Context|Converters|Data|Headers|StatusCode|XhrFields)?([a-z]*)/i,alertAttrRegex:/acAlert([a-z]*)/i,initEvent:"ac.init",eventSuffix:".ac",preventDefault:!0,stopPropagation:!1,eventReturn:!0,alertInputDataKey:"input",alertAllowEmpty:!0,ajaxDefaults:{dataType:"json"},alertDefaults:{title:"Are you sure?",type:"warning",showCancelButton:!0},swal:"function"==typeof swal?swal:null,serializeObject:function(){var a={};return t.each(this.serializeArray(),function(t,e){var n=a[e.name];a[e.name]=void 0!==n&&null!==n?n+","+e.value:e.value}),a}};var d=function(){this._doneCallbacks=[],this._failCallbacks=[],this._alwaysCallbacks=[]};d.prototype.resolve=function(){for(var t=Array.prototype.splice.call(arguments,1),a=0;a<this._doneCallbacks.length;a++)this._doneCallbacks[a].apply(arguments[0],t);for(var e=0;e<this._alwaysCallbacks.length;e++)this._alwaysCallbacks[e].apply(arguments[0])},d.prototype.reject=function(){for(var t=Array.prototype.splice.call(arguments,1),a=0;a<this._failCallbacks.length;a++)this._failCallbacks[a].apply(arguments[0],t);for(var e=0;e<this._alwaysCallbacks.length;e++)this._alwaysCallbacks[e].apply(arguments[0])},d.prototype.done=function(t){return this._doneCallbacks.push(t),this},d.prototype.fail=function(t){return this._failCallbacks.push(t),this},d.prototype.always=function(t){return this._alwaysCallbacks.push(t),this},d.prototype.then=d.prototype.always}(jQuery);
