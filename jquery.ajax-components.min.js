/**
 * @author Alex Furey
 * @version 1.2.2
 * @requires jQuery
 */
!function(t){function e(e){t.ac.config.enableResponseHandlers&&t.each(t.ac.config.responseHandlers,function(a,n){a in e&&(t.isPlainObject(e[a])||t.isArray(e[a])?t.each(e[a],n):n.call(e[a],e[a]))})}function a(a,n){var r=t.ajax(t.extend(!0,{},t.ac.config.ajaxDefaults,a)).done(e).done(t.ac.config.doneHandler).fail(t.ac.config.errorHandler).always(t.ac.config.alwaysHandler);return n&&r.done(function(t){n.resolve(this,t)}).fail(function(t,e,a){n.reject(this,t,e,a)}),r}function n(e,n,i){var l=function(e){return e===!1||null===e?!1:t.ac.config.alertAllowEmpty||""!==e?("string"==typeof e&&(r(n,"data")[t.ac.config.alertInputDataKey]=e),void a(n,i)):!1};e=t.extend(!0,{},t.ac.config.alertDefaults,e),"function"==typeof t.ac.config.swal?t.ac.config.swal(e,l):"type"in e&&"input"===e.type?l(prompt(e.title+(e.text?"\n"+e.text:""),"inputValue"in e?e.inputValue:"")):"showCancelButton"in e&&e.showCancelButton?l(confirm(e.title+(e.text?"\n"+e.text:""))):(alert(e.title+(e.text?"\n"+e.text:"")),l())}function r(t,e,a){return void 0===a&&(a={}),e in t||(t[e]=a),t[e]}function i(e,a,n){t.isPlainObject(n)&&a in e&&t.isPlainObject(e[a])?t.extend(!0,e[a],n):t.isArray(n)&&a in e&&t.isArray(e[a])?e.push.apply(e[a],n):e[a]=n}function l(e,a){var n={};return t.each(t(e).data(),function(e,l){var o,c,s=e.match(a);if(s)if(s=s.filter(function(t){return t}),s.length>1){c=n;for(var u=1;u<s.length;u++)s[u]&&(o=s[u].charAt(0).toLowerCase()+s[u].slice(1),u<s.length-1?c=r(c,o):i(c,o,l))}else t.isPlainObject(l)&&t.extend(!0,n,l)}),n}function o(e,a){"FORM"===t(a).prop("tagName")&&(e.ajax.url=t(a).attr("action")||e.ajax.url,e.ajax.method=t(a).attr("method")||e.ajax.method,t.extend(!0,r(e.ajax,"data"),t.ac.config.serializeObject.call(t(a))))}function c(e,a){t.extend(!0,r(e,p),l(a,t.ac.config.alertAttrRegex)),t.extend(!0,r(e,f),l(a,t.ac.config.ajaxAttrRegex)),o(e,a)}function s(e){var r=t.extend(!0,{},e.data.opts),i=this;return i!==e.delegateTarget&&c(r,e.delegateTarget),c(r,i),p in r&&r[p]&&!t.isEmptyObject(r[p])?n(r[p],r[f],e.data.deferred):a(r[f],e.data.deferred),t.ac.config.stopPropagation&&e.stopPropagation(),t.ac.config.preventDefault&&e.preventDefault(),t.ac.config.eventReturn}function u(e,a,n,r,i){console.log(arguments);var l={};return l[f]=n,l[p]=r,t(this).on(e+t.ac.config.eventSuffix,a,{opts:l,deferred:i},s).trigger(t.ac.config.initEvent+t.ac.config.eventSuffix),this}var f="ajax",p="alert";t.fn.ac=function(){for(var e=[],a=0;j<arguments.length;a++)1===j&&t.isPlainObject(arguments[a])&&e.push(null),e.push(arguments[a]);var n=new d;e.push(n);var r=this.each(function(){u.apply(this,e)});return t.ac.config.returnDeferred?n:r},t.ac=function(t){return a(t)},t.ac.config={doneHandler:null,errorHandler:null,alwaysHandler:null,responseHandlers:{html:function(e,a){t(e).html(a)},remove:function(e,a){t(a).remove()},hide:function(e,a){t(a).hide()},show:function(e,a){t(a).show()},hideModal:function(e,a){t(a).modal("hide")},showModal:function(e,a){t(a).modal("show")},append:function(e,a){t(e).append(a)},prepend:function(e,a){t(e).prepend(a)}},enableResponseHandlers:!0,returnDeferred:!0,ajaxAttrRegex:/acAjax(Accepts|Contents|Context|Converters|Data|Headers|StatusCode|XhrFields)?([a-z]*)/i,alertAttrRegex:/acAlert([a-z]*)/i,initEvent:"ac.init",eventSuffix:".ac",preventDefault:!0,stopPropagation:!1,eventReturn:!0,alertInputDataKey:"input",alertAllowEmpty:!0,ajaxDefaults:{dataType:"json"},alertDefaults:{title:"Are you sure?",type:"warning",showCancelButton:!0},swal:"function"==typeof swal?swal:null,serializeObject:function(){var e={};return t.each(this.serializeArray(),function(t,a){var n=e[a.name];"undefined"!=typeof n&&null!==n?e[a.name]=n+","+a.value:e[a.name]=a.value}),e}};var d=function(){this._doneCallbacks=[],this._failCallbacks=[],this._alwaysCallbacks=[]};d.prototype.resolve=function(){for(var t=Array.prototype.splice.call(arguments,1),e=0;e<this._doneCallbacks.length;e++)this._doneCallbacks[e].apply(arguments[0],t);for(var e=0;e<this._alwaysCallbacks.length;e++)this._alwaysCallbacks[e].apply(arguments[0])},d.prototype.reject=function(){for(var t=Array.prototype.splice.call(arguments,1),e=0;e<this._failCallbacks.length;e++)this._failCallbacks[e].apply(arguments[0],t);for(var e=0;e<this._alwaysCallbacks.length;e++)this._alwaysCallbacks[e].apply(arguments[0])},d.prototype.done=function(t){return this._doneCallbacks.push(t),this},d.prototype.fail=function(t){return this._failCallbacks.push(t),this},d.prototype.always=function(t){return this._alwaysCallbacks.push(t),this},d.prototype.then=d.prototype.always}(jQuery);