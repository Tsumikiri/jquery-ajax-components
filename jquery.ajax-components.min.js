/**
 * @author Alex Furey
 * @version 1.2.1
 * @requires jQuery
 */
!function(e){function a(a){e.fn.ac.config.enableResponseHandlers&&e.each(e.fn.ac.config.responseHandlers,function(n,t){n in a&&(e.isPlainObject(a[n])||e.isArray(a[n])?e.each(a[n],t):t.call(a[n],a[n]))})}function n(n,t){return e.ajax(e.extend(!0,{},e.fn.ac.config.ajaxDefaults,n)).done(a).done(e.fn.ac.config.doneHandler).fail(e.fn.ac.config.errorHandler).always(e.fn.ac.config.alwaysHandler).done(function(e){t.resolve(this,e)}).fail(function(e,a,n){t.reject(this,e,a,n)})}function t(a,t,l){var i=function(a){return a===!1||null===a?!1:e.fn.ac.config.alertAllowEmpty||""!==a?("string"==typeof a&&(r(t,"data")[e.fn.ac.config.alertInputDataKey]=a),void n(t,l)):!1};a=e.extend(!0,{},e.fn.ac.config.alertDefaults,a),"function"==typeof e.fn.ac.config.swal?e.fn.ac.config.swal(a,i):"type"in a&&"input"===a.type?i(prompt(a.title+(a.text?"\n"+a.text:""),"inputValue"in a?a.inputValue:"")):"showCancelButton"in a&&a.showCancelButton?i(confirm(a.title+(a.text?"\n"+a.text:""))):(alert(a.title+(a.text?"\n"+a.text:"")),i())}function r(e,a,n){return void 0===n&&(n={}),a in e||(e[a]=n),e[a]}function l(a,n,t){e.isPlainObject(t)&&n in a&&e.isPlainObject(a[n])?e.extend(!0,a[n],t):e.isArray(t)&&n in a&&e.isArray(a[n])?a.push.apply(a[n],t):a[n]=t}function i(a,n){var t={};return e.each(e(a).data(),function(a,i){var o,c,s=a.match(n);if(s)if(s=s.filter(function(e){return e}),s.length>1){c=t;for(var f=1;f<s.length;f++)s[f]&&(o=s[f].charAt(0).toLowerCase()+s[f].slice(1),f<s.length-1?c=r(c,o):l(c,o,i))}else e.isPlainObject(i)&&e.extend(!0,t,i)}),t}function o(a,n){"FORM"===e(n).prop("tagName")&&(a.ajax.url=e(n).attr("action")||a.ajax.url,a.ajax.method=e(n).attr("method")||a.ajax.method,e.extend(!0,r(a.ajax,"data"),e.fn.ac.config.serializeObject.call(e(n))))}function c(a,n){e.extend(!0,r(a,p),i(n,e.fn.ac.config.alertAttrRegex)),e.extend(!0,r(a,u),i(n,e.fn.ac.config.ajaxAttrRegex)),o(a,n)}function s(a){var r=e.extend(!0,{},a.data.opts),l=this;return l!==a.delegateTarget&&c(r,a.delegateTarget),c(r,l),p in r&&r[p]&&!e.isEmptyObject(r[p])?t(r[p],r[u],a.data.deferred):n(r[u],a.data.deferred),e.fn.ac.config.stopPropagation&&a.stopPropagation(),e.fn.ac.config.preventDefault&&a.preventDefault(),e.fn.ac.config.eventReturn}function f(a,n,t,r,l){var i={};i[u]=t,i[p]=r,e(this).on(a+e.fn.ac.config.eventSuffix,n,{opts:i,deferred:l},s)}var u="ajax",p="alert",d=function(){this.doneCallbacks=[],this.failCallbacks=[],this.alwaysCallbacks=[]};d.prototype.resolve=function(){for(var e=Array.prototype.splice.call(arguments,1),a=0;a<this.doneCallbacks.length;a++)this.doneCallbacks[a].apply(arguments[0],e);for(var a=0;a<this.alwaysCallbacks.length;a++)this.alwaysCallbacks[a].apply(arguments[0])},d.prototype.reject=function(){for(var e=Array.prototype.splice.call(arguments,1),a=0;a<this.failCallbacks.length;a++)this.failCallbacks[a].apply(arguments[0],e);for(var a=0;a<this.alwaysCallbacks.length;a++)this.alwaysCallbacks[a].apply(arguments[0])},d.prototype.done=function(e){return this.doneCallbacks.push(e),this},d.prototype.fail=function(e){return this.failCallbacks.push(e),this},d.prototype.always=function(e){return this.alwaysCallbacks.push(e),this},e.fn.ac=function(){for(var a=[],n=0;4>n;n++)1===n&&e.isPlainObject(arguments[n])?(a.push(null),a.push(arguments[n]),n++):a.push(arguments[n]);var t=new d;a.push(t);var r=this.each(function(){f.apply(this,a)});return e.fn.ac.config.returnDeferred?t:r},e.fn.ac.config={doneHandler:null,errorHandler:null,alwaysHandler:null,responseHandlers:{content:function(a,n){e(a).html(n)},remove:function(a,n){e(n).remove()},hide:function(a,n){e(n).hide()},show:function(a,n){e(n).show()},hideModal:function(a,n){e(n).modal("hide")},showModal:function(a,n){e(n).modal("show")},append:function(a,n){e(a).append(n)},prepend:function(a,n){e(a).prepend(n)}},enableResponseHandlers:!0,returnDeferred:!0,ajaxAttrRegex:/acAjax(Accepts|Contents|Context|Converters|Data|Headers|StatusCode|XhrFields)?([a-z]*)/i,alertAttrRegex:/acAlert([a-z]*)/i,eventSuffix:".ac",preventDefault:!0,stopPropagation:!1,eventReturn:!0,alertInputDataKey:"input",alertAllowEmpty:!0,ajaxDefaults:{dataType:"json"},alertDefaults:{title:"Are you sure?",type:"warning",showCancelButton:!0},swal:"function"==typeof swal?swal:null,serializeObject:function(){var a={};return e.each(this.serializeArray(),function(e,n){var t=a[n.name];"undefined"!=typeof t&&null!==t?a[n.name]=t+","+n.value:a[n.name]=n.value}),a}}}(jQuery);